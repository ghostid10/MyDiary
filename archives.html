<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Archives</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Padauk:wght@400;700&display=swap" rel="stylesheet">
    <style>body { font-family: 'Padauk', sans-serif; background: #fdf2f8; }</style>
</head>
<body class="p-5">
    <div class="max-w-md mx-auto">
        <h1 class="text-2xl font-bold text-pink-500 mb-6 flex items-center gap-2">ğŸ“‚ á€¡á€™á€¾á€á€ºá€á€›á€™á€¾á€á€ºá€á€™á€ºá€¸á€™á€»á€¬á€¸</h1>
        <div id="archiveList" class="space-y-4">
            </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCRUag3lfCii8IHnNGsW2TvcK-b8_YuqUY",
            authDomain: "oursecretdiary-d767a.firebaseapp.com",
            databaseURL: "https://oursecretdiary-d767a-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "oursecretdiary-d767a",
            storageBucket: "oursecretdiary-d767a.firebasestorage.app",
            messagingSenderId: "610893709105",
            appId: "1:610893709105:web:ed7a66d562c8f2383cfa10"
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // á€¡á€€á€¯á€”á€ºá€œá€¯á€¶á€¸á€€á€­á€¯ á€†á€½á€²á€‘á€¯á€á€ºá€•á€¼á€á€á€¼á€„á€ºá€¸
        database.ref('allPosts').on('value', (snap) => {
            const list = document.getElementById('archiveList');
            list.innerHTML = "";
            if(!snap.exists()) {
                list.innerHTML = "<p class='text-gray-400 text-center'>á€™á€¾á€á€ºá€á€™á€ºá€¸á€™á€»á€¬á€¸ á€™á€›á€¾á€­á€á€±á€¸á€•á€«</p>";
                return;
            }
            let posts = [];
            snap.forEach(c => { posts.unshift(c.val()); });
            posts.forEach(p => {
                const date = new Date(p.timestamp).toLocaleDateString();
                list.innerHTML += `
                    <div class="bg-white p-5 rounded-2xl shadow-sm border border-pink-100">
                        <span class="text-[10px] text-pink-400 font-bold">${date}</span>
                        <h2 class="text-lg font-bold text-gray-800 mt-1">${p.title}</h2>
                        <p class="text-sm text-gray-600 mt-2 leading-relaxed whitespace-pre-line">${p.content}</p>
                    </div>`;
            });
        });
    </script>
</body>
</html>