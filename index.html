<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Putuu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Padauk:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Padauk', sans-serif; background: #f0f2f5; overflow-x: hidden; }
        .handwriting { font-family: 'Dancing Script', cursive; }
        
        .app-card { 
            background: #ffffff; 
            border-radius: 2rem; 
            box-shadow: 8px 8px 16px #bebebe, -8px -8px 16px #ffffff;
            transition: all 0.2s ease;
        }
        .app-card:active { transform: scale(0.97); }

        .grid-layout { display: grid; grid-template-columns: repeat(6, 1fr); gap: 15px; padding: 0 20px 20px 20px; max-width: 480px; margin: 0 auto; }
        .box-1, .box-2, .box-3 { grid-column: span 2; }
        .box-music, .box-updates, .box-archive { grid-column: span 6; }
        
        .premium-msg-box {
            background: #111111;
            border: 2px solid #fbcfe8;
            border-radius: 1.5rem;
            position: relative;
            overflow: hidden;
            height: 90px; 
            max-width: 440px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .heart-particle {
            position: absolute;
            color: #ff4d94;
            font-size: 14px;
            pointer-events: none;
            text-shadow: 0 0 10px #ff4d94;
            animation: explode 2s ease-out forwards;
            z-index: 5;
        }

        @keyframes explode {
            0% { transform: translate(0, 0) scale(0); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(1.5); opacity: 0; }
        }

        #modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 100; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(8px); }
    </style>
</head>
<body class="pb-10">

    <header class="p-6 pb-2 max-w-[480px] mx-auto w-full space-y-4">
        <div class="flex justify-between items-center w-full">
            <div class="bg-pink-500 px-3 py-1.5 rounded-2xl shadow-lg shrink-0">
                <p class="text-white font-bold text-[10px]">·Äï·Ä∞·Äê·Ä∞·Ä∏·Äú·Ä±·Ä∏·Äë·Ä∂·Äû·Ä≠·ÄØ·Ä∑ ‚ù§Ô∏è</p>
            </div>
            <div class="flex-grow text-center px-2">
                <p class="text-pink-400 font-bold text-[11px] tracking-widest">‚ú® ·Äê·Ä≠·ÄØ·Ä∑·Äî·Äæ·ÄÖ·Ä∫·Äö·Ä±·Ä¨·ÄÄ·Ä∫·Äõ·Ä≤·Ä∑ ·Äí·Ä≠·ÄØ·ÄÑ·Ä∫·Äö·Ä¨·Äõ·ÄÆ ‚ú®</p>
            </div>
            <div class="w-12 h-12 rounded-2xl bg-white p-1 shadow-md border border-white overflow-hidden shrink-0">
                <img src="profile.jpg" alt="Love" class="w-full h-full object-cover rounded-xl" onerror="this.src='https://ui-avatars.com/api/?name=P&background=fce7f3&color=ec4899'">
            </div>
        </div>

        <div class="premium-msg-box px-6" id="msgBox">
            <p class="text-pink-100 text-[11px] italic handwriting tracking-wide relative z-10 text-center leading-tight">
                "·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫·Äê·ÄΩ·Ä± ·Äò·Äö·Ä∫·Äú·Ä±·Ä¨·ÄÄ·Ä∫·Äï·Ä≤ ·Äï·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äú·Ä≤·Äï·Ä´·ÄÖ·Ä±...<br>·Äô·ÄÑ·Ä∫·Ä∏·Ä°·Äï·Ä±·Ä´·Ä∫·Äë·Ä¨·Ä∏·Äê·Ä≤·Ä∑ ·ÄÑ·Ä´·Ä∑·Ä°·ÄÅ·Äª·ÄÖ·Ä∫·Äê·ÄΩ·Ä±·ÄÄ·Äê·Ä±·Ä¨·Ä∑ ·Äë·Ä¨·Äù·Äõ·Äï·Ä´"
            </p>
        </div>
    </header>

    <div class="grid-layout mt-2">
        <div class="box-1 app-card p-4 flex flex-col items-center justify-center text-center">
            <p class="text-[8px] font-bold text-pink-400 uppercase">Birthday</p>
            <p class="text-[10px] font-bold text-slate-700">07.07.2021</p>
        </div>

        <div onclick="window.open('archives.html', '_blank')" class="box-2 app-card p-4 flex flex-col items-center justify-center text-center cursor-pointer">
            <p class="text-[9px] font-bold text-slate-700">·Ä°·Äô·Äæ·Äê·Ä∫·Äê·Äõ<br>·ÄÖ·Ä¨·ÄÖ·ÄØ·Äô·Äª·Ä¨·Ä∏</p>
            <div class="text-pink-400 text-xs mt-1">‚ù§Ô∏è</div>
        </div>

        <div class="box-3 app-card bg-slate-900 p-4 flex flex-col items-center justify-center text-center">
            <span class="text-[7px] text-pink-500 font-bold uppercase">Relationship</span>
            <div id="timer" class="text-[9px] text-white font-mono font-bold">00d 00h 00m</div>
        </div>

        <div class="box-music app-card p-5">
            <div class="flex items-center justify-between">
                <div class="flex flex-col">
                    <p id="song-name" class="text-[10px] font-bold text-slate-600">Music Player</p>
                    <p id="song-status" class="text-[7px] text-pink-400 uppercase tracking-widest">Stopped</p>
                </div>
                <div class="flex items-center gap-4">
                    <button onclick="playPrev()" class="text-slate-400 text-lg">‚èÆ</button>
                    <button id="play-btn" onclick="toggleMusic()" class="w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center text-pink-500 shadow-md">
                        <span id="play-icon">‚ñ∂Ô∏è</span>
                    </button>
                    <button onclick="playNext()" class="text-slate-400 text-lg">‚è≠</button>
                </div>
            </div>
        </div>

        <div class="box-updates app-card p-6">
            <p class="text-[9px] text-pink-500 font-bold mb-4 uppercase tracking-widest border-b pb-1">Latest Updates</p>
            <div id="recentDisplay" class="space-y-4">
                </div>
        </div>

        <div onclick="window.open('archives.html', '_blank')" class="box-archive app-card p-5 flex justify-between items-center cursor-pointer">
            <div class="flex items-center gap-4">
                <div class="w-8 h-8 bg-pink-50 rounded-xl flex items-center justify-center">üìÇ</div>
                <span class="text-[10px] font-bold text-slate-500 uppercase">Memory Archives</span>
            </div>
            <span class="text-pink-400">‚Üí</span>
        </div>
    </div>

    <div id="modal" onclick="closeModal()">
        <div class="bg-white p-6 rounded-[2.5rem] max-w-[400px] w-full mx-4 shadow-2xl" onclick="event.stopPropagation()">
            <h3 id="modal-title" class="text-pink-500 font-bold mb-3 border-b border-pink-50 pb-2 text-sm"></h3>
            <p id="modal-content" class="text-slate-600 text-[11px] leading-relaxed whitespace-pre-line overflow-y-auto max-h-[300px] pr-2"></p>
            <button onclick="closeModal()" class="mt-6 w-full bg-slate-900 text-white text-[10px] py-3 rounded-xl font-bold uppercase">Close</button>
        </div>
    </div>

    <script>
        function createHeart() {
            const box = document.getElementById('msgBox');
            if(!box) return;
            const heart = document.createElement('div');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.className = 'heart-particle';
            const tx = (Math.random() - 0.5) * 300;
            const ty = (Math.random() - 0.5) * 150;
            heart.style.setProperty('--tx', `${tx}px`);
            heart.style.setProperty('--ty', `${ty}px`);
            heart.style.left = '50%';
            heart.style.top = '50%';
            box.appendChild(heart);
            setTimeout(() => heart.remove(), 2000);
        }
        setInterval(createHeart, 250);

        let currentSong = 0;
        const songs = ["song1.mp3", "song2.mp3", "song3.mp3", "song4.mp3", "song5.mp3"];
        let audio = new Audio();
        let isPlaying = false;

        function updateUI() {
            document.getElementById('song-name').innerText = "Track " + (currentSong + 1);
            document.getElementById('play-icon').innerText = isPlaying ? "‚è∏" : "‚ñ∂Ô∏è";
            document.getElementById('song-status').innerText = isPlaying ? "Playing" : "Paused";
        }

        function toggleMusic() {
            if(!audio.src || audio.src.includes('undefined')) audio.src = songs[currentSong];
            if (!isPlaying) { audio.play().then(() => { isPlaying = true; updateUI(); }).catch(e => console.log(e)); }
            else { audio.pause(); isPlaying = false; updateUI(); }
        }
        function playNext() { currentSong = (currentSong + 1) % songs.length; audio.src = songs[currentSong]; isPlaying = true; audio.play().then(() => updateUI()); }
        function playPrev() { currentSong = (currentSong - 1 + songs.length) % songs.length; audio.src = songs[currentSong]; isPlaying = true; audio.play().then(() => updateUI()); }
        audio.onended = () => playNext();

        const firebaseConfig = {
            apiKey: "AIzaSyCRUag3lfCii8IHnNGsW2TvcK-b8_YuqUY",
            authDomain: "oursecretdiary-d767a.firebaseapp.com",
            databaseURL: "https://oursecretdiary-d767a-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "oursecretdiary-d767a",
            storageBucket: "oursecretdiary-d767a.firebasestorage.app",
            messagingSenderId: "610893709105",
            appId: "1:610893709105:web:ed7a66d562c8f2383cfa10"
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // ·Äï·Ä≠·ÄØ·Ä∑·ÄÖ·Ä∫·Äê·ÄΩ·Ä±·Ä°·ÄÄ·ÄØ·Äî·Ä∫·Äï·Ä±·Ä´·Ä∫·ÄÖ·Ä±·Äõ·Äî·Ä∫ ·Äï·Äº·ÄÑ·Ä∫·Äë·Ä¨·Ä∏·Äû·Ä±·Ä¨·Ä°·Äï·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏
        database.ref('allPosts').on('value', (snap) => {
            const container = document.getElementById('recentDisplay'); 
            container.innerHTML = "";
            if(!snap.exists()) return;
            let posts = []; 
            snap.forEach(c => { posts.unshift(c.val()); });
            posts.forEach(p => {
                container.innerHTML += `
                    <div class="bg-gray-50 p-3 rounded-xl border border-white shadow-sm mb-3">
                        <h4 class="text-[10px] font-bold text-slate-800">${p.title}</h4>
                        <p class="text-[9px] text-slate-500 mt-1">${p.content.substring(0, 60)}...</p>
                        <button onclick="openModal('${p.title.replace(/'/g, "\\'")}', '${p.content.replace(/'/g, "\\'")}')" class="text-pink-400 text-[9px] font-bold mt-1">·ÄÜ·ÄÄ·Ä∫·Äñ·Äê·Ä∫·Äõ·Äî·Ä∫ ‚Üí</button>
                    </div>`;
            });
        });

        function openModal(title, content) {
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-content').innerText = content;
            document.getElementById('modal').style.display = 'flex';
        }
        function closeModal() { document.getElementById('modal').style.display = 'none'; }

        const startDate = new Date("Jan 01, 2026 00:00:00").getTime(); 
        setInterval(() => {
            const diff = new Date().getTime() - startDate;
            document.getElementById("timer").innerHTML = Math.floor(diff/(1000*60*60*24)) + "d " + Math.floor((diff%(1000*60*60*24))/(1000*60*60)) + "h " + Math.floor((diff%(1000*60*60))/(1000*60)) + "m";
        }, 1000);
    </script>
</body>
</html>